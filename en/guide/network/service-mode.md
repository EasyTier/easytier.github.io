# Service Management & Hybrid Mode

EasyTier supports a highly flexible "service-oriented" operating mode. By combining a local configuration directory with remote management interfaces, `easytier-core` can function as a persistent system service that simultaneously manages multiple static and dynamic network instances.

## Core Concepts

### Hybrid Mode
In Hybrid Mode, an EasyTier node no longer relies solely on command-line arguments or a single configuration file at startup. It can:
1. **Load Local Configs**: Automatically load all configuration files from a specified directory.
2. **Accept Remote Management**: Add, modify, or stop network instances in real-time via the Web Console or GUI. **Note: The `-w <username>` parameter is required to connect to the Web Console for remote management (see [Using the Web Console](web-console.md)).**
3. **Persistent Service**: Even if no networks are currently running, the service process stays alive waiting for instructions as long as remote management is enabled (or the daemon flag is specified).

### Directory-Based Configuration (`--config-dir`)
Using the `--config-dir` parameter, you can specify a folder as a configuration source. EasyTier will scan all `.toml` files in that folder and start an independent network instance for each.

```sh
easytier-core --config-dir /etc/easytier/conf.d -w <username>
```

## Remote Configuration Persistence

When running EasyTier with `--config-dir`, network configurations pushed remotely via the Web Console or GUI are automatically persisted to that directory.

- **Automatic Naming**: Remotely created networks are named after their UUIDs (e.g., `8e5f...toml`).
- **Resumption on Restart**: These persisted files are re-scanned and loaded upon service restart, ensuring continuous network connectivity.

## Permissions & Security Control

To prevent accidental modification of core configuration files, EasyTier introduces a granular permission control model. The permissions for each network instance depend on its source:

| Source | Remote Modify (Web/GUI) | Remote Stop/Delete | Notes |
| :--- | :---: | :---: | :--- |
| **UUID files in config-dir** | ✅ | ✅ | Dynamic configs generated by remote management |
| **Single config file (`-c`)** | ✅ | ❌ | Statically specified files can be modified but not deleted remotely |
| **Read-only files / Env vars** | ❌ | ❌ | Configs marked as read-only or using `${VAR}` cannot be modified |
| **CLI args / FFI** | ❌ | ❌ | Temporarily running instances do not support remote persistence |

::: tip Hint
If you want a manually created config file to be both remotely modifiable and deletable, place it in the `--config-dir` directory and ensure its filename matches the UUID format (or ensure it has write permissions).
:::

## Best Practice: Running as a System Service

It is recommended to install EasyTier as a system service (e.g., Systemd) and use it with `--config-dir`:

1. **Install Service**: Use `easytier-cli service install` or manually configure a Systemd unit.
2. **Configuration Entry**: Add `--config-dir /etc/easytier/conf.d` to the service configuration.
3. **Dynamic Management**: From then on, you only need to operate via the Web Console. All changes will be saved locally on the server, eliminating the need to log in and modify Systemd settings again.

::: tip GUI User Hint
If you are using EasyTier GUI, you do not need to manually configure the command line. The GUI has a built-in "Service Mode" that supports one-click installation, uninstallation, and management of system services. For more details, please refer to [GUI Running Modes](/en/guide/gui/modes).
:::
